/*!
 * Angular Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.0.0-rc1-master-325d83e
 */
goog.provide("ng.material.components.fabShared"),goog.require("ng.material.core"),function(){"use strict";function n(n,e,t,r,a,o){function i(){$.direction=$.direction||"down",$.isOpen=$.isOpen||!1,u()}function c(){var t=["$md.pressdown","click","focusin","focusout"];angular.forEach(t,function(n){e.on(n,l)}),n.$on("$destroy",function(){angular.forEach(t,function(n){e.off(n,l)}),p()})}function l(n){k&&(s(k)||k.$material)||(s(n)?(x(n),k=n):"focusin"==n.type?$.open():"focusout"==n.type&&$.close(),o(function(){k=null},100,!1))}function s(n){return"$md.pressdown"==n.type||"click"==n.type}function u(){$.currentActionIndex=-1}function d(){n.$watch("vm.direction",function(n,r){t.removeClass(e,"md-"+r),t.addClass(e,"md-"+n),u()});var r,a;n.$watch("vm.isOpen",function(n){u(),r&&a||(r=D(),a=I()),n?m():p();var o=n?"md-is-open":"",i=n?"":"md-is-open";r.attr("aria-haspopup",!0),r.attr("aria-expanded",n),a.attr("aria-hidden",!n),t.setClass(e,o,i)})}function f(){r.nextTick(function(){t.addClass(e,"md-noop")})}function m(){angular.element(document).on("keydown",g)}function p(){angular.element(document).off("keydown",g)}function g(n){switch(n.which){case a.KEY_CODE.SPACE:return n.preventDefault(),!1;case a.KEY_CODE.ESCAPE:return $.close(),n.preventDefault(),!1;case a.KEY_CODE.LEFT_ARROW:return C(n),!1;case a.KEY_CODE.UP_ARROW:return A(n),!1;case a.KEY_CODE.RIGHT_ARROW:return O(n),!1;case a.KEY_CODE.DOWN_ARROW:return E(n),!1}}function v(n){h(n,-1)}function b(n){h(n,1)}function h(n,e){var t=y();$.currentActionIndex=$.currentActionIndex+e,$.currentActionIndex=Math.min(t.length-1,$.currentActionIndex),$.currentActionIndex=Math.max(0,$.currentActionIndex);var r=angular.element(t[$.currentActionIndex]).children()[0];angular.element(r).attr("tabindex",0),r.focus(),n.preventDefault(),n.stopImmediatePropagation()}function y(){var n=I()[0].querySelectorAll(".md-fab-action-item");return angular.forEach(n,function(n){angular.element(angular.element(n).children()[0]).attr("tabindex",-1)}),n}function C(n){"left"===$.direction?b(n):v(n)}function A(n){"down"===$.direction?v(n):b(n)}function O(n){"left"===$.direction?v(n):b(n)}function E(n){"up"===$.direction?v(n):b(n)}function S(n){return r.getClosest(n,"md-fab-trigger")}function w(n){return r.getClosest(n,"md-fab-actions")}function x(n){S(n.target)&&$.toggle(),w(n.target)&&$.close()}function D(){return e.find("md-fab-trigger")}function I(){return e.find("md-fab-actions")}var $=this;$.open=function(){n.$evalAsync("vm.isOpen = true")},$.close=function(){n.$evalAsync("vm.isOpen = false"),e.find("md-fab-trigger")[0].focus()},$.toggle=function(){n.$evalAsync("vm.isOpen = !vm.isOpen")},i(),c(),d(),f();var k}angular.module("material.components.fabShared",["material.core"]).controller("FabController",n),n.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout"]}(),function(){"use strict";function n(){function n(n,e){e.prepend('<div class="md-css-variables"></div>')}return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"FabController",controllerAs:"vm",link:n}}function e(){function n(n){var e=n[0],t=n.controller("mdFabSpeedDial"),r=e.querySelectorAll(".md-fab-action-item"),a=e.querySelector("md-fab-trigger"),o=e.querySelector(".md-css-variables"),i=parseInt(window.getComputedStyle(o).zIndex);angular.forEach(r,function(n,e){var t=n.style;t.transform=t.webkitTransform="",t.transitionDelay="",t.opacity=1,t.zIndex=r.length-e+i}),a.style.zIndex=i+r.length+1,t.isOpen||angular.forEach(r,function(n,e){var r,a,o=n.style;switch(t.direction){case"up":r=n.scrollHeight*(e+1),a="Y";break;case"down":r=-n.scrollHeight*(e+1),a="Y";break;case"left":r=n.scrollWidth*(e+1),a="X";break;case"right":r=-n.scrollWidth*(e+1),a="X"}var i="translate"+a+"("+r+"px)";o.transform=o.webkitTransform=i})}return{addClass:function(e,t,r){e.hasClass("md-fling")&&(n(e),r())},removeClass:function(e,t,r){n(e),r()}}}function t(){function n(n){var t=n[0],r=n.controller("mdFabSpeedDial"),a=t.querySelectorAll(".md-fab-action-item"),o=t.querySelector(".md-css-variables"),i=parseInt(window.getComputedStyle(o).zIndex);angular.forEach(a,function(n,t){var o=n.style,c=t*e;o.opacity=r.isOpen?1:0,o.transform=o.webkitTransform=r.isOpen?"scale(1)":"scale(0.1)",o.transitionDelay=(r.isOpen?c:a.length-c)+"ms",o.zIndex=a.length-t+i})}var e=65;return{addClass:function(e,t,r){n(e),r()},removeClass:function(e,t,r){n(e),r()}}}angular.module("material.components.fabSpeedDial",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabSpeedDial",n).animation(".md-fling",e).animation(".md-scale",t).service("mdFabSpeedDialFlingAnimation",e).service("mdFabSpeedDialScaleAnimation",t)}(),ng.material.components.fabShared=angular.module("material.components.fabShared");